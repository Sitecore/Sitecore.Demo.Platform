---
ID: "dc13f3c4-47ee-4113-86b1-09655616e84d"
Parent: "594d7d33-1176-417b-864a-e8810e5d2946"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: "/sitecore/media library/Themes/Habitat Sites/Habitat Home/scripts/component-accordions"
DB: master
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/26E8063CCA2F4A50973BDD32FFE748F0.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "2a7aa9e5-2a25-452e-8492-59ec71c39c55"
  Value: LyogZ2xvYmFsIF86dHJ1ZSAqLw0KWEEuY29tcG9uZW50LmFjY29yZGlvbnMgPSAoZnVuY3Rpb24gKCQpIHsNCiAgICB2YXIgcHViID0ge307DQoNCiAgICBmdW5jdGlvbiBwYWdlRWRpdG9yKCkgew0KICAgICAgICBpZiAoJCgnYm9keScpLmhhc0NsYXNzKCdvbi1wYWdlLWVkaXRvcicpKSB7DQogICAgICAgICAgICBTaXRlY29yZS5QYWdlTW9kZXMuQ2hyb21lTWFuYWdlci5yZXNldENocm9tZXMoKTsgLy9wYWdlIGVkaXRvciBsaW5lcyBmaXgNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHZhciB0b29nbGVFdmVudHMgPSB7DQogICAgICAgIGZvY3VzOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCJzaG93Iik7DQogICAgICAgIH0sDQogICAgICAgIGJsdXI6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoInNob3ciKTsNCiAgICAgICAgfQ0KICAgIH07DQoNCiAgICBmdW5jdGlvbiBoZWFkZXJCYWNrZ3JvdW5kKGhlYWRlcikgew0KICAgICAgICB2YXIgYmFja2dyb3VuZEljb24gPSAkKGhlYWRlciksDQogICAgICAgICAgICBiYWNrZ3JvdW5kID0gJChoZWFkZXIpLmZpbmQoJ2ltZycpLA0KICAgICAgICAgICAgYmFja2dyb3VuZFNyYyA9IGJhY2tncm91bmQuYXR0cignc3JjJyk7DQoNCiAgICAgICAgaWYgKGJhY2tncm91bmRTcmMpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmRJY29uLnBhcmVudHMoJy5hY2NvcmRpb24nKS5hZGRDbGFzcygnYWNjb3JkaW9uLWltYWdlJyk7DQoNCiAgICAgICAgICAgIGJhY2tncm91bmRJY29uLmNzcyh7DQogICAgICAgICAgICAgICAgJ2JhY2tncm91bmQnOiAndXJsKCcgKyBiYWNrZ3JvdW5kU3JjICsgJyknLA0KICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLXJlcGVhdCc6ICduby1yZXBlYXQnLA0KICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLXNpemUnOiAnY292ZXInLA0KICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLXBvc2l0aW9uJzogJzUwJSAxMDAlJw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGJhY2tncm91bmQuaGlkZSgpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY2FsY1NsaWRlU2l6ZShhY2MpIHsNCiAgICAgICAgdmFyIGFjY29yZGlvbldpZHRoID0gJChhY2MpLndpZHRoKCksDQogICAgICAgICAgICBhY2NvcmRpb25JdGVtcyA9ICQoYWNjKS5maW5kKCcuaXRlbScpLA0KICAgICAgICAgICAgbWF4SGVpZ2h0ID0gMDsNCg0KICAgICAgICBfLmVhY2goYWNjb3JkaW9uSXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7DQogICAgICAgICAgICB2YXIgaXRlbUNvbnRlbnQgPSAkKGl0ZW0pLmZpbmQoJy50b2dnbGUtY29udGVudCcpLA0KICAgICAgICAgICAgICAgIGl0ZW1IZWFkZXIgPSAkKGl0ZW0pLmZpbmQoJy50b2dnbGUtaGVhZGVyJyksDQogICAgICAgICAgICAgICAgc2xpZGVXaWR0aCA9IGFjY29yZGlvbldpZHRoIC0gKGFjY29yZGlvbkl0ZW1zLmxlbmd0aCAqIGl0ZW1IZWFkZXIub3V0ZXJXaWR0aCgpKTsNCg0KICAgICAgICAgICAgaWYgKCQoaXRlbSkuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7DQogICAgICAgICAgICAgICAgJChpdGVtKS5jc3Moew0KICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiBzbGlkZVdpZHRoDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vd2lkdGgNCiAgICAgICAgICAgIGl0ZW1Db250ZW50LmNzcyh7DQogICAgICAgICAgICAgICAgJ3dpZHRoJzogKCQoYWNjKS5oYXNDbGFzcygnYWNjb3JkaW9uLWltYWdlJykpID8gc2xpZGVXaWR0aCArIGl0ZW1IZWFkZXIub3V0ZXJXaWR0aCgpIDogc2xpZGVXaWR0aCAtIGl0ZW1IZWFkZXIub3V0ZXJXaWR0aCgpIC0gcGFyc2VJbnQoaXRlbUhlYWRlci5jc3MoJ3BhZGRpbmcnKSkNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAvL2hlaWdodA0KICAgICAgICAgICAgaWYgKCQoaXRlbSkuZmluZCgnLnRvZ2dsZS1jb250ZW50JykuaGVpZ2h0KCkgPiBtYXhIZWlnaHQpIHsNCiAgICAgICAgICAgICAgICBtYXhIZWlnaHQgPSAkKGl0ZW0pLmZpbmQoJy50b2dnbGUtY29udGVudCcpLmhlaWdodCgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBhbmltYXRlSG9yaXpvbnRhbChwcm9wZXJ0aWVzKSB7DQogICAgICAgIHZhciBhY2NvcmRpb24gPSAkKHRoaXMpLnBhcmVudHMoJy5hY2NvcmRpb24nKSwNCiAgICAgICAgICAgIHBhbmVsID0gJCh0aGlzKS5jbG9zZXN0KCcuaXRlbScpLA0KICAgICAgICAgICAgaGVhZGVyID0gcGFuZWwuZmluZCgnLnRvZ2dsZS1oZWFkZXInKSwNCiAgICAgICAgICAgIGNvbnRlbnQgPSBwYW5lbC5maW5kKCcudG9nZ2xlLWNvbnRlbnQnKSwNCiAgICAgICAgICAgIGl0ZW1zID0gYWNjb3JkaW9uLmZpbmQoJy5pdGVtJyksDQogICAgICAgICAgICBzaWJsaW5ncyA9IHBhbmVsLnNpYmxpbmdzKCksDQogICAgICAgICAgICBzaWJsaW5nc0NvbnRlbnQgPSBzaWJsaW5ncy5maW5kKCcudG9nZ2xlLWNvbnRlbnQnKTsNCg0KICAgICAgICBzaWJsaW5ncy5zdG9wKHRydWUpLmFuaW1hdGUoew0KICAgICAgICAgICAgIndpZHRoIjogMA0KICAgICAgICB9LCBwcm9wZXJ0aWVzLnNwZWVkLCBwcm9wZXJ0aWVzLmVhc2luZywgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgc2libGluZ3NDb250ZW50LmNzcyh7DQogICAgICAgICAgICAgICAgImRpc3BsYXkiOiAibm9uZSINCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCg0KICAgICAgICBpZiAocGFuZWwuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7DQoNCiAgICAgICAgICAgIHZhciBzbGlkZVdpZHRoID0gYWNjb3JkaW9uLmhhc0NsYXNzKCdhY2NvcmRpb24taW1hZ2UnKSA/IGNvbnRlbnQub3V0ZXJXaWR0aCgpIDogKGFjY29yZGlvbi5vdXRlcldpZHRoKCkgLSAoKGl0ZW1zLmxlbmd0aCAtIDEpICogcGFuZWwub3V0ZXJXaWR0aCgpICsgMikpLA0KICAgICAgICAgICAgICAgIGNvbnRlbnRXaWR0aCA9IGFjY29yZGlvbi5oYXNDbGFzcygnYWNjb3JkaW9uLWltYWdlJykgPyBzbGlkZVdpZHRoIDogc2xpZGVXaWR0aCAtIGhlYWRlci5vdXRlcldpZHRoKCk7DQoNCiAgICAgICAgICAgIHBhbmVsLnN0b3AodHJ1ZSkuYW5pbWF0ZSh7DQogICAgICAgICAgICAgICAgIndpZHRoIjogc2xpZGVXaWR0aA0KICAgICAgICAgICAgfSwgcHJvcGVydGllcy5zcGVlZCwgcHJvcGVydGllcy5lYXNpbmcsIGZ1bmN0aW9uICgpIHsNCg0KICAgICAgICAgICAgfSk7DQoNCg0KICAgICAgICAgICAgY29udGVudC5jc3Moew0KICAgICAgICAgICAgICAgICJ3aWR0aCI6IGNvbnRlbnRXaWR0aCwNCiAgICAgICAgICAgICAgICAiZGlzcGxheSI6ICJibG9jayINCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgIH0gZWxzZSB7DQoNCiAgICAgICAgICAgIHBhbmVsLnN0b3AodHJ1ZSkuYW5pbWF0ZSh7DQogICAgICAgICAgICAgICAgIndpZHRoIjogMA0KICAgICAgICAgICAgfSwgcHJvcGVydGllcy5zcGVlZCwgcHJvcGVydGllcy5lYXNpbmcsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICBjb250ZW50LmNzcyh7DQogICAgICAgICAgICAgICAgICAgICJkaXNwbGF5IjogIm5vbmUiDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldFF1ZXJ5UGFyYW0odmFyaWFibGUpIHsNCiAgICAgICAgdmFyIHF1ZXJ5ID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSk7DQogICAgICAgIHZhciB2YXJzID0gcXVlcnkuc3BsaXQoIiYiKTsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YXJzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICB2YXIgcGFpciA9IHZhcnNbaV0uc3BsaXQoIj0iKTsNCiAgICAgICAgICAgIGlmIChkZWNvZGVVUklDb21wb25lbnQocGFpclswXS50b0xvY2FsZUxvd2VyQ2FzZSgpKSA9PT0gdmFyaWFibGUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBudWxsOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHVwZGF0ZVF1ZXJ5UGFyYW0oa2V5LCB2YWx1ZSwgaXNBZGRpbmcpIHsNCiAgICAgICAgdmFyIHVybDsNCiAgICAgICAgdmFsdWUgPSB2YWx1ZSArICIiOw0KICAgICAgICB2YXIgcGFyYW1WYWx1ZSA9IGdldFF1ZXJ5UGFyYW0oa2V5KTsNCiAgICAgICAgaWYgKHBhcmFtVmFsdWUgIT0gbnVsbCkgew0KICAgICAgICAgICAgdmFyIGVuYWJsZWRJdGVtcyA9IHBhcmFtVmFsdWUuc3BsaXQoJywnKTsNCiAgICAgICAgICAgIGlmIChpc0FkZGluZykgew0KICAgICAgICAgICAgICAgIGVuYWJsZWRJdGVtcy5wdXNoKHZhbHVlKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdmFyIGluZGV4VG9SZW1vdmUgPSBlbmFibGVkSXRlbXMuaW5kZXhPZih2YWx1ZSk7DQogICAgICAgICAgICAgICAgaWYgKGluZGV4VG9SZW1vdmUgPiAtMSkgew0KICAgICAgICAgICAgICAgICAgICBlbmFibGVkSXRlbXMuc3BsaWNlKGluZGV4VG9SZW1vdmUsIDEpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVuYWJsZWRJdGVtcyA9IGNsZWFuQXJyYXkoZW5hYmxlZEl0ZW1zKTsNCiAgICAgICAgICAgIHZhbHVlID0galF1ZXJ5LnVuaXF1ZShlbmFibGVkSXRlbXMpLmpvaW4oKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZihrZXkgKyAiPSIpID4gLTEpIHsNCiAgICAgICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgdXJsID0gbG9jYXRpb24uaHJlZi5yZXBsYWNlKGtleSArICI9IiArIHBhcmFtVmFsdWUsIGtleSArICI9IiArIHZhbHVlKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9IGtleSArICI9IiArIHBhcmFtVmFsdWU7DQogICAgICAgICAgICAgICAgdmFyIHN0YXJ0aW5nUXVlcnlJbmRleCA9IGxvY2F0aW9uLmhyZWYuaW5kZXhPZihjdXJyZW50VmFsdWUpOw0KICAgICAgICAgICAgICAgIHVybCA9IGxvY2F0aW9uLmhyZWYuc2xpY2UoMCwgc3RhcnRpbmdRdWVyeUluZGV4IC0gMSkgKyBsb2NhdGlvbi5ocmVmLnNsaWNlKHN0YXJ0aW5nUXVlcnlJbmRleCArIGN1cnJlbnRWYWx1ZS5sZW5ndGgsIGxvY2F0aW9uLmhyZWYubGVuZ3RoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHVybCA9IGxvY2F0aW9uLmhyZWY7DQogICAgICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigiPyIpID4gLTEpIHsNCiAgICAgICAgICAgICAgICB1cmwgKz0gdXJsLmVuZHNXaXRoKCImIikgPyAiIiA6ICImIg0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB1cmwgKz0gdXJsLmVuZHNXaXRoKCI/IikgPyAiIiA6ICI/Ig0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdXJsICs9IGtleSArICI9IiArIHZhbHVlOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGhpc3RvcnkucHVzaFN0YXRlKSB7DQogICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoeyBwYXRoOiB1cmwgfSwgIiIsIHVybCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZXRRdWVyeVBhcmFtS2V5KGFjY29yZGlvbnMpIHsNCiAgICAgICAgdmFyIGZpcnN0QWNjb3JkaW9uSWQgPSBhY2NvcmRpb25zWzBdLmlkOw0KICAgICAgICBpZiAoYWNjb3JkaW9ucy5sZW5ndGggPiAwICYmIGZpcnN0QWNjb3JkaW9uSWQgIT0gIiIpew0KICAgICAgICAgICAgcmV0dXJuIGZpcnN0QWNjb3JkaW9uSWQudG9Mb2NhbGVMb3dlckNhc2UoKQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBudWxsOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGNsZWFuQXJyYXkoYWN0dWFsKSB7DQogICAgICAgIHZhciBuZXdBcnJheSA9IG5ldyBBcnJheSgpOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFjdHVhbC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgaWYgKGFjdHVhbFtpXSkgew0KICAgICAgICAgICAgICAgIG5ld0FycmF5LnB1c2goYWN0dWFsW2ldKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbmV3QXJyYXk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYWNjb3JkaW9uKGFjYywgcHJvcGVydGllcykgew0KICAgICAgICB2YXIgZXYgPSAnY2xpY2snLA0KICAgICAgICAgICAgJGJvZHkgPSAkKCdib2R5JyksDQogICAgICAgICAgICB0b2dnbGVIZWFkZXIgPSBhY2MuZmluZCgnLnRvZ2dsZS1oZWFkZXInKTsNCg0KICAgICAgICBpZiAocHJvcGVydGllcy5leHBhbmRPbkhvdmVyKSB7DQogICAgICAgICAgICBpZiAoISRib2R5Lmhhc0NsYXNzKCdvbi1wYWdlLWVkaXRvcicpKSB7DQogICAgICAgICAgICAgICAgZXYgPSAnbW91c2VlbnRlcic7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGV2ID0gJ2NsaWNrJzsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICB9DQoNCiAgICAgICAgdG9nZ2xlSGVhZGVyLm9uKCJtb3VzZW92ZXIiLCB0b29nbGVFdmVudHMuZm9jdXMpOw0KICAgICAgICB0b2dnbGVIZWFkZXIub24oIm1vdXNlbGVhdmUiLCB0b29nbGVFdmVudHMuYmx1cik7DQogICAgICAgIHRvZ2dsZUhlYWRlci5vbigiZm9jdXMiLCB0b29nbGVFdmVudHMuZm9jdXMpOw0KICAgICAgICB0b2dnbGVIZWFkZXIub24oImJsdXIiLCB0b29nbGVFdmVudHMuYmx1cik7DQogICAgICAgIHRvZ2dsZUhlYWRlci5vbigia2V5dXAiLCBmdW5jdGlvbiAoZSkgew0KICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykgew0KICAgICAgICAgICAgICAgICQodGhpcykuY2xpY2soKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQoNCg0KICAgICAgICBpZiAoYWNjLmhhc0NsYXNzKCdhY2NvcmRpb24taG9yaXpvbnRhbCcpKSB7DQogICAgICAgICAgICAvL2NhbGMgc2xpZGUgd2lkdGgNCiAgICAgICAgICAgICQod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICBjYWxjU2xpZGVTaXplKGFjYyk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgXy5lYWNoKHRvZ2dsZUhlYWRlciwgZnVuY3Rpb24gKGhlYWRlcikgew0KICAgICAgICAgICAgICAgIGhlYWRlckJhY2tncm91bmQoaGVhZGVyKTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJCgnYm9keScpLmhhc0NsYXNzKCdvbi1wYWdlLWVkaXRvcicpKSB7DQogICAgICAgICAgICB0b2dnbGVIZWFkZXIgPSB0b2dnbGVIZWFkZXIuZmluZCgnLmNvbXBvbmVudC1jb250ZW50Jyk7DQogICAgICAgIH0NCiAgICAgICAgdG9nZ2xlSGVhZGVyLm9uKGV2LCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICB2YXIgYWNjb3JkaW9uID0gJCh0aGlzKS5wYXJlbnRzKCcuYWNjb3JkaW9uJyksDQogICAgICAgICAgICAgICAgcGFuZWwgPSAkKHRoaXMpLmNsb3Nlc3QoJy5pdGVtJyksDQogICAgICAgICAgICAgICAgJGJvZHkgPSAkKCdib2R5JyksDQogICAgICAgICAgICAgICAgY29udGVudCA9IHBhbmVsLmZpbmQoJy50b2dnbGUtY29udGVudCcpLA0KICAgICAgICAgICAgICAgIHNpYmxpbmdzID0gcGFuZWwuc2libGluZ3MoKSwNCiAgICAgICAgICAgICAgICBzaWJsaW5nc0NvbnRlbnQgPSBzaWJsaW5ncy5maW5kKCcudG9nZ2xlLWNvbnRlbnQnKSwNCiAgICAgICAgICAgICAgICB0aW1lb3V0SWQ7DQoNCiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICBwYWdlRWRpdG9yKCk7DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICB2YXIgaXNFbmFibGluZ0l0ZW0gPSB0aGlzLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCJhY3RpdmUiKSA9PSBmYWxzZTsNCiAgICAgICAgICAgIHZhciBjdXJyZW50SW5kZXggPSAkKHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuKS5pbmRleCh0aGlzLnBhcmVudEVsZW1lbnQpOw0KICAgICAgICAgICAgdmFyIHF1ZXJ5UGFyYW1LZXkgPSBnZXRRdWVyeVBhcmFtS2V5KGFjY29yZGlvbik7DQogICAgICAgICAgICBpZiAocXVlcnlQYXJhbUtleSkgew0KICAgICAgICAgICAgICAgIHVwZGF0ZVF1ZXJ5UGFyYW0ocXVlcnlQYXJhbUtleSwgY3VycmVudEluZGV4LCBpc0VuYWJsaW5nSXRlbSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICghcHJvcGVydGllcy5leHBhbmRPbkhvdmVyKSB7DQogICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMuY2FuT3Blbk11bHRpcGxlKSB7DQogICAgICAgICAgICAgICAgICAgIHBhbmVsLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFjY29yZGlvbi5oYXNDbGFzcygiYWNjb3JkaW9uLWhvcml6b250YWwiKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZUhvcml6b250YWwuY2FsbCh0aGlzLCBwcm9wZXJ0aWVzKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC5zdG9wKCkuc2xpZGVUb2dnbGUoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogcHJvcGVydGllcy5zcGVlZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBwcm9wZXJ0aWVzLmVhc2luZw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2spOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCg0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLmNhblRvZ2dsZSkgew0KDQoNCiAgICAgICAgICAgICAgICAgICAgICAgIHNpYmxpbmdzLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgcGFuZWwudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjb3JkaW9uLmhhc0NsYXNzKCJhY2NvcmRpb24taG9yaXpvbnRhbCIpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hbmltYXRpb24gZm9yIGhvcml6b250YWwgYWNjb3JkaW9uDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZUhvcml6b250YWwuY2FsbCh0aGlzLCBwcm9wZXJ0aWVzKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWJsaW5nc0NvbnRlbnQuc3RvcCgpLnNsaWRlVXAoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHByb3BlcnRpZXMuc3BlZWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IHByb3BlcnRpZXMuZWFzaW5nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuc3RvcCgpLnNsaWRlVG9nZ2xlKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBwcm9wZXJ0aWVzLnNwZWVkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBwcm9wZXJ0aWVzLmVhc2luZw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCg0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgc2libGluZ3MucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgc2libGluZ3NDb250ZW50LnNsaWRlVXAoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogcHJvcGVydGllcy5zcGVlZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBwcm9wZXJ0aWVzLmVhc2luZw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2spOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBwYW5lbC5hZGRDbGFzcygnYWN0aXZlJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50LnNsaWRlRG93bih7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBwcm9wZXJ0aWVzLnNwZWVkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IHByb3BlcnRpZXMuZWFzaW5nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMuY2FuVG9nZ2xlKSB7DQogICAgICAgICAgICAgICAgICAgIHBhbmVsLnVuYmluZCgnbW91c2VsZWF2ZScpOw0KDQogICAgICAgICAgICAgICAgICAgIGlmICghJGJvZHkuaGFzQ2xhc3MoJ29uLXBhZ2UtZWRpdG9yJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhbmVsLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYW5lbC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY2NvcmRpb24uaGFzQ2xhc3MoImFjY29yZGlvbi1ob3Jpem9udGFsIikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYW5pbWF0aW9uIGZvciBob3Jpem9udGFsIGFjY29yZGlvbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZUhvcml6b250YWwuY2FsbCh0aGlzLCBwcm9wZXJ0aWVzKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC5zdG9wKCkuc2xpZGVVcCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBwcm9wZXJ0aWVzLnNwZWVkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IHByb3BlcnRpZXMuZWFzaW5nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgJGJvZHkub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYW5lbC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY2NvcmRpb24uaGFzQ2xhc3MoImFjY29yZGlvbi1ob3Jpem9udGFsIikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYW5pbWF0aW9uIGZvciBob3Jpem9udGFsIGFjY29yZGlvbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZUhvcml6b250YWwuY2FsbCh0aGlzLCBwcm9wZXJ0aWVzKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC5zdG9wKCkuc2xpZGVVcCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBwcm9wZXJ0aWVzLnNwZWVkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IHByb3BlcnRpZXMuZWFzaW5nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCg0KDQogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQudW5iaW5kKCdtb3VzZWVudGVyJyk7DQogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQub24oJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChhY2NvcmRpb24uaGFzQ2xhc3MoImFjY29yZGlvbi1ob3Jpem9udGFsIikpIHsNCiAgICAgICAgICAgICAgICAgICAgc2libGluZ3MucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOw0KDQogICAgICAgICAgICAgICAgICAgIHBhbmVsLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTsNCiAgICAgICAgICAgICAgICAgICAgLy9hbmltYXRpb24gZm9yIGhvcml6b250YWwgYWNjb3JkaW9uDQogICAgICAgICAgICAgICAgICAgIGFuaW1hdGVIb3Jpem9udGFsLmNhbGwodGhpcywgcHJvcGVydGllcyk7DQoNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBzaWJsaW5ncy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7DQogICAgICAgICAgICAgICAgICAgIHNpYmxpbmdzQ29udGVudC5zdG9wKCkuc2xpZGVVcCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHByb3BlcnRpZXMuc3BlZWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBwcm9wZXJ0aWVzLmVhc2luZw0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKTsNCg0KICAgICAgICAgICAgICAgICAgICBwYW5lbC5hZGRDbGFzcygnYWN0aXZlJyk7DQogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuc2xpZGVEb3duKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogcHJvcGVydGllcy5zcGVlZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IHByb3BlcnRpZXMuZWFzaW5nDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2spOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZGlzYWJsZUVtcHR5QWNjb3JkaW9ucygkYWNjb3JkaW9uKSB7DQogICAgICAgIHZhciBlbXB0eVBsYWNlaG9sZGVycyA9ICRhY2NvcmRpb24uZmluZCgiLml0ZW0gLnNjRW1wdHlQbGFjZWhvbGRlciIpLA0KICAgICAgICAgICAgaSwgbGVuZ3RoLA0KICAgICAgICAgICAgcGxhY2Vob2xkZXJDb2RlVGFnLA0KICAgICAgICAgICAgcGFyZW50LA0KICAgICAgICAgICAgJHBsYWNlaG9sZGVyLA0KICAgICAgICAgICAgcGxhY2Vob2xkZXJJZCwNCiAgICAgICAgICAgIHBsYWNlaG9sZGVyS2V5LA0KICAgICAgICAgICAgZWRpdEZyYW1lLA0KICAgICAgICAgICAgY2hyb21lS2V5LA0KICAgICAgICAgICAgaDsNCg0KICAgICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBlbXB0eVBsYWNlaG9sZGVycy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgJHBsYWNlaG9sZGVyID0gJChlbXB0eVBsYWNlaG9sZGVyc1tpXSk7DQogICAgICAgICAgICBwbGFjZWhvbGRlcklkID0gJHBsYWNlaG9sZGVyLmF0dHIoInNjLXBsYWNlaG9sZGVyLWlkIik7DQoNCiAgICAgICAgICAgIC8vZGlzYWJsZSBlZGl0IGZyYW1lcw0KICAgICAgICAgICAgcGxhY2Vob2xkZXJDb2RlVGFnID0gJHBsYWNlaG9sZGVyLnNpYmxpbmdzKCJjb2RlW2Nocm9tZXR5cGU9J3BsYWNlaG9sZGVyJ11baWQ9JyIgKyBwbGFjZWhvbGRlcklkICsgIiddIik7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyS2V5ID0gcGxhY2Vob2xkZXJDb2RlVGFnLmF0dHIoImtleSIpOw0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKHBsYWNlaG9sZGVyS2V5KSA9PT0gInN0cmluZyIpIHsNCiAgICAgICAgICAgICAgICAgICAgZWRpdEZyYW1lID0gU2l0ZWNvcmUuUGFnZU1vZGVzLkNocm9tZU1hbmFnZXIuY2hyb21lcygpLmZpbHRlcihmdW5jdGlvbiAoY2hyb21lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjaHJvbWVLZXkgPSBjaHJvbWUub3BlbmluZ01hcmtlcigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjaHJvbWVLZXkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNocm9tZUtleSA9IGNocm9tZUtleS5hdHRyKCJrZXkiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgKGNocm9tZUtleSkgIT09ICJ1bmRlZmluZWQiICYmIGNocm9tZUtleS5pbmRleE9mKHBsYWNlaG9sZGVyS2V5KSA9PT0gMDsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgZWRpdEZyYW1lWzBdLnR5cGUuY2hyb21lLmRhdGEuY3VzdG9tLmVkaXRhYmxlID0gImZhbHNlIjsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyA2NjY7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyAvL2ZhbGxiYWNrIC0gZGVsZXRlIGNvZGUgdGFncyB0byBwcmV2ZW50IGluc2VydGluZyBpbnRvIHBsYWNlaG9sZGVycw0KICAgICAgICAgICAgICAgICRwbGFjZWhvbGRlci5zaWJsaW5ncygiY29kZVtjaHJvbWV0eXBlPSdwbGFjZWhvbGRlciddIikucmVtb3ZlKCk7DQogICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tYWxlcnQsIG5vLWNvbnNvbGUgKi8NCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiQ291bGQgbm90IGRpc2FibGUgZWRpdGluZyBmb3IgcGxhY2Vob2xkZXIiLCBlKTsNCiAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWFsZXJ0LCBuby1jb25zb2xlICovDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vYWRqdXN0IGhlaWdodCwgYW5kIHJlbW92ZSBwbGFjZWhvbGRlciAiZGFzaGVkIiBiYWNrZ3JvdW5kDQogICAgICAgICAgICBwYXJlbnQgPSAkcGxhY2Vob2xkZXIucGFyZW50cygiLnRvZ2dsZS1oZWFkZXIiKTsNCiAgICAgICAgICAgIGlmIChwYXJlbnQubGVuZ3RoICE9PSAwKSB7DQogICAgICAgICAgICAgICAgaCA9IHBhcnNlSW50KHBhcmVudC5jc3MoImZvbnQtc2l6ZSIpKSAqIDIgfHwgKCRwbGFjZWhvbGRlci5oZWlnaHQoKSAvIDMpOw0KICAgICAgICAgICAgICAgICRwbGFjZWhvbGRlci5hcHBlbmQoJCgiPHA+W05vIGNvbXBvbmVudHMgaW4gaGVhZGVyXTwvcD4iKSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGggPSAkcGxhY2Vob2xkZXIuaGVpZ2h0KCk7DQogICAgICAgICAgICAgICAgJHBsYWNlaG9sZGVyLmFwcGVuZCgkKCI8cD5bTm8gY29tcG9uZW50cyBpbiBzZWN0aW9uXTwvcD4iKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBoICs9ICJweCI7DQogICAgICAgICAgICAkcGxhY2Vob2xkZXIucmVtb3ZlQ2xhc3MoInNjRW1wdHlQbGFjZWhvbGRlciIpOw0KICAgICAgICAgICAgJHBsYWNlaG9sZGVyLmNzcygiaGVpZ2h0IiwgaCk7DQogICAgICAgIH0NCg0KICAgIH0NCg0KICAgIHB1Yi5pbml0ID0gZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgYWNjb3JkaW9ucyA9ICQoJy5hY2NvcmRpb246bm90KC5pbml0aWFsaXplZCknKTsNCg0KICAgICAgICBhY2NvcmRpb25zLmVhY2goZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgdmFyIHByb3BlcnRpZXMgPSAkKHRoaXMpLmRhdGEoJ3Byb3BlcnRpZXMnKSwNCiAgICAgICAgICAgICAgICBhY2MgPSAkKHRoaXMpOw0KDQogICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygndG9nZ2xlJykpIHsNCiAgICAgICAgICAgICAgICAkLmV4dGVuZChwcm9wZXJ0aWVzLCB7DQogICAgICAgICAgICAgICAgICAgICdjYW5Ub2dnbGUnOiB0cnVlLA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBhY2MuZmluZCgnLnRvZ2dsZS1jb250ZW50JykuaGlkZSgpOw0KDQogICAgICAgICAgICB2YXIgY3VycmVudCA9IGdldFF1ZXJ5UGFyYW0oZ2V0UXVlcnlQYXJhbUtleShhY2MpKTsNCiAgICAgICAgICAgIGlmIChjdXJyZW50ICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICB2YXIgYXJyID0gY3VycmVudC5zcGxpdCgnLCcpOw0KICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IGFjYy5maW5kKCdsaScpDQogICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGl0ZW1zLmxlbmd0aDsgaW5kZXgrKykgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGl0ZW1zW2luZGV4XTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFyci5pbmRleE9mKGluZGV4ICsgIiIpID4gLTEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICQoZWxlbWVudCkuYWRkQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgJChlbGVtZW50KS5maW5kKCcudG9nZ2xlLWNvbnRlbnQnKS5zaG93KCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2UgaWYgKHByb3BlcnRpZXMuZXhwYW5kZWRCeURlZmF1bHQpIHsNCiAgICAgICAgICAgICAgICBhY2MuZmluZCgnbGk6Zmlyc3QtY2hpbGQnKS5hZGRDbGFzcygnYWN0aXZlJyk7DQogICAgICAgICAgICAgICAgYWNjLmZpbmQoJ2xpOmZpcnN0LWNoaWxkJykuZmluZCgnLnRvZ2dsZS1jb250ZW50Jykuc2hvdygpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBhY2NvcmRpb24oYWNjLCBwcm9wZXJ0aWVzKTsNCiAgICAgICAgICAgIGRpc2FibGVFbXB0eUFjY29yZGlvbnMoYWNjKTsNCiAgICAgICAgICAgIGFjYy5hZGRDbGFzcygnaW5pdGlhbGl6ZWQnKTsNCiAgICAgICAgfSk7DQogICAgfTsNCg0KICAgIHJldHVybiBwdWI7DQoNCn0oalF1ZXJ5KSk7DQoNClhBLnJlZ2lzdGVyKCdhY2NvcmRpb25zJywgWEEuY29tcG9uZW50LmFjY29yZGlvbnMpOw==
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 17623
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20160811T135342Z
  - Version: 2
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20160811T135342Z
