---
ID: "0cc2d876-8bfd-4e32-b8c2-9254e97603c9"
Parent: "594d7d33-1176-417b-864a-e8810e5d2946"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: "/sitecore/media library/Themes/Habitat Sites/Habitat Home/scripts/component-tabs"
DB: master
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/324D9AF34CDE41F2ADB66D9D5E909649.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "3d110f70-4a43-4222-8423-4d6cfa317f47"
  Value: WEEuY29tcG9uZW50LnRhYnMgPSAoZnVuY3Rpb24oJCkgew0KDQogICAgdmFyIHB1YiA9IHt9LA0KICAgICAgICBpbnN0YW5jZTsNCg0KICAgIGZ1bmN0aW9uIHBhZ2VFZGl0b3IoKSB7DQogICAgICAgIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ29uLXBhZ2UtZWRpdG9yJykpIHsNCiAgICAgICAgICAgIFNpdGVjb3JlLlBhZ2VNb2Rlcy5DaHJvbWVNYW5hZ2VyLnJlc2V0Q2hyb21lcygpOyAvL3BhZ2UgZWRpdG9yIGxpbmVzIGZpeA0KICAgICAgICB9DQogICAgfQ0KICAgIHZhciBpc0ZsaXBJbnNpZGUgPSBmdW5jdGlvbihpbnN0YW5jZSkgew0KICAgICAgICByZXR1cm4gISFpbnN0YW5jZS5maW5kKCcuY29tcG9uZW50LmZsaXAnKS5sZW5ndGgNCiAgICB9DQoNCiAgICBmdW5jdGlvbiB0YWJzU2Nyb2xsYWJsZSgkdGFic1Njcm9sbCkgew0KICAgICAgICB2YXIgc3BlZWQgPSAxNTA7IC8vdGFicyBzY3JvbGwgc3BlZWQNCg0KICAgICAgICBmdW5jdGlvbiBpbml0TmF2U2Nyb2xsKCR0YWJzTmF2KSB7DQogICAgICAgICAgICB2YXIgc3VtID0gMCwNCiAgICAgICAgICAgICAgICBtYXhIZWlnaHQgPSAwOw0KDQogICAgICAgICAgICBpZiAoJHRhYnNOYXYubGVuZ3RoKSB7DQogICAgICAgICAgICAgICAgJHRhYnNOYXYucGFyZW50KCkuZmluZCgiLnByZXYiKS5yZW1vdmUoKTsNCiAgICAgICAgICAgICAgICAkdGFic05hdi5wYXJlbnQoKS5maW5kKCIubmV4dCIpLnJlbW92ZSgpOw0KICAgICAgICAgICAgICAgICR0YWJzTmF2LnVud3JhcCgpOw0KDQogICAgICAgICAgICAgICAgJHRhYnNOYXYuY3NzKCJ3aWR0aCIsICJhdXRvIik7DQogICAgICAgICAgICAgICAgJHRhYnNOYXYuY3NzKCJoZWlnaHQiLCAiYXV0byIpOw0KICAgICAgICAgICAgICAgICR0YWJzTmF2LmNzcygibGVmdCIsIDApOw0KICAgICAgICAgICAgfQ0KDQoNCiAgICAgICAgICAgICR0YWJzTmF2LmZpbmQoImxpIikuZWFjaChmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICBzdW0gKz0gJCh0aGlzKS5vdXRlcldpZHRoKHRydWUpOw0KICAgICAgICAgICAgfSk7DQoNCg0KICAgICAgICAgICAgJHRhYnNOYXYuZmluZCgibGkiKS5lYWNoKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIG1heEhlaWdodCA9IE1hdGgubWF4KG1heEhlaWdodCwgJCh0aGlzKS5oZWlnaHQoKSk7DQogICAgICAgICAgICB9KTsNCg0KDQogICAgICAgICAgICAkdGFic05hdi53cmFwKCI8ZGl2IGNsYXNzPSd3cmFwcGVyJz4iKTsNCiAgICAgICAgICAgICQoIjxkaXYgY2xhc3M9J25leHQgdGFiLXNsaWRlcic+PjwvZGl2PiIpLmluc2VydEFmdGVyKCR0YWJzTmF2KTsNCiAgICAgICAgICAgICQoIjxkaXYgY2xhc3M9J3ByZXYgdGFiLXNsaWRlcic+PDwvZGl2PiIpLmluc2VydEJlZm9yZSgkdGFic05hdik7DQoNCg0KICAgICAgICAgICAgJHRhYnNOYXYucGFyZW50KCkuY3NzKCJoZWlnaHQiLCBwYXJzZUludChtYXhIZWlnaHQsIDEwKSk7DQogICAgICAgICAgICAkdGFic05hdi5wYXJlbnQoKS5maW5kKCIudGFiLXNsaWRlciIpLmNzcygiaGVpZ2h0IiwgcGFyc2VJbnQobWF4SGVpZ2h0LCAxMCkgLSAyKTsNCiAgICAgICAgICAgIC8vZml4IGZvciA4MTExDQogICAgICAgICAgICBzdW0gKz0gMTA7DQogICAgICAgICAgICBpZiAoc3VtID4gJHRhYnNOYXYucGFyZW50KCkud2lkdGgoKSkgew0KICAgICAgICAgICAgICAgICR0YWJzTmF2LnBhcmVudCgpLmZpbmQoIi5wcmV2IikuaGlkZSgpOw0KICAgICAgICAgICAgICAgICR0YWJzTmF2LndpZHRoKHN1bSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICR0YWJzTmF2LnBhcmVudCgpLmZpbmQoIi5wcmV2IikuaGlkZSgpOw0KICAgICAgICAgICAgICAgICR0YWJzTmF2LnBhcmVudCgpLmZpbmQoIi5uZXh0IikuaGlkZSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCg0KICAgICAgICBmdW5jdGlvbiBiaW5kUHJldk5leHRFdmVudHMoY3VycmVudCwgJHRhYnNOYXYpIHsNCiAgICAgICAgICAgIGN1cnJlbnQuZmluZCgiLnByZXYiKS5jbGljayhmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICB2YXIgbGVmdCA9IHBhcnNlSW50KCR0YWJzTmF2LmNzcygibGVmdCIpLCAxMCk7DQogICAgICAgICAgICAgICAgbGVmdCArPSBzcGVlZDsNCg0KICAgICAgICAgICAgICAgIGlmIChsZWZ0ID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gMDsNCiAgICAgICAgICAgICAgICAgICAgJHRhYnNOYXYuc3RvcCgpLmFuaW1hdGUoew0KICAgICAgICAgICAgICAgICAgICAgICAgImxlZnQiOiBsZWZ0DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgICR0YWJzTmF2LnBhcmVudCgpLmZpbmQoIi5wcmV2IikuaGlkZSgpOw0KICAgICAgICAgICAgICAgICAgICAkdGFic05hdi5wYXJlbnQoKS5maW5kKCIubmV4dCIpLnNob3coKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAkdGFic05hdi5zdG9wKCkuYW5pbWF0ZSh7DQogICAgICAgICAgICAgICAgICAgICAgICAibGVmdCI6IGxlZnQNCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgJHRhYnNOYXYucGFyZW50KCkuZmluZCgiLnByZXYiKS5zaG93KCk7DQogICAgICAgICAgICAgICAgICAgICR0YWJzTmF2LnBhcmVudCgpLmZpbmQoIi5uZXh0Iikuc2hvdygpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQoNCiAgICAgICAgICAgIGN1cnJlbnQuZmluZCgiLm5leHQiKS5jbGljayhmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICB2YXIgbGVmdCA9IHBhcnNlSW50KCR0YWJzTmF2LmNzcygibGVmdCIpLCAxMCksDQogICAgICAgICAgICAgICAgICAgIG5hdldpZHRoID0gJHRhYnNOYXYud2lkdGgoKSwNCiAgICAgICAgICAgICAgICAgICAgbmF2UGFyZW50V2lkdGggPSAkdGFic05hdi5wYXJlbnQoKS53aWR0aCgpOw0KDQogICAgICAgICAgICAgICAgbGVmdCAtPSBzcGVlZDsNCg0KICAgICAgICAgICAgICAgIGlmICgobmF2V2lkdGggKyBsZWZ0KSA8IG5hdlBhcmVudFdpZHRoKSB7DQogICAgICAgICAgICAgICAgICAgIGxlZnQgPSBuYXZXaWR0aCAtIG5hdlBhcmVudFdpZHRoICsgMjA7DQogICAgICAgICAgICAgICAgICAgICR0YWJzTmF2LnN0b3AoKS5hbmltYXRlKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICJsZWZ0IjogLWxlZnQNCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgJHRhYnNOYXYucGFyZW50KCkuZmluZCgiLnByZXYiKS5zaG93KCk7DQogICAgICAgICAgICAgICAgICAgICR0YWJzTmF2LnBhcmVudCgpLmZpbmQoIi5uZXh0IikuaGlkZSgpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICR0YWJzTmF2LnN0b3AoKS5hbmltYXRlKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICJsZWZ0IjogbGVmdA0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgICAgICAgICAkdGFic05hdi5wYXJlbnQoKS5maW5kKCIucHJldiIpLnNob3coKTsNCiAgICAgICAgICAgICAgICAgICAgJHRhYnNOYXYucGFyZW50KCkuZmluZCgiLm5leHQiKS5zaG93KCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBiaW5kQ2hhbmdlVGFicygkdGFic05hdiwgJHRhYnNDb250YWluZXIpIHsNCiAgICAgICAgICAgICR0YWJzTmF2LmZpbmQoImxpIikuY2xpY2soZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gJCh0aGlzKS5pbmRleCgpOw0KDQogICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygiYWN0aXZlIik7DQogICAgICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCJhY3RpdmUiKTsNCg0KICAgICAgICAgICAgICAgICR0YWJzQ29udGFpbmVyLmZpbmQoIi50YWIiKS5yZW1vdmVDbGFzcygiYWN0aXZlIik7DQogICAgICAgICAgICAgICAgJHRhYnNDb250YWluZXIuZmluZCgiLnRhYjplcSgiICsgaW5kZXggKyAiKSIpLmFkZENsYXNzKCJhY3RpdmUiKTsNCiAgICAgICAgICAgICAgICBpZiAoaXNGbGlwSW5zaWRlKGluc3RhbmNlKSkgew0KICAgICAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICAgICAgWEEuY29tcG9uZW50LmZsaXAuZXF1YWxTaWRlSGVpZ2h0KGluc3RhbmNlKQ0KICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovDQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIGR1cmluZyBjYWxjdWxhdGlvbiBoZWlnaHQgb2YgRmxpcCBsaXN0IGluIHRvZ2dsZScpOyAvLyBqc2hpbnQgaWdub3JlOmxpbmUNCiAgICAgICAgICAgICAgICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uc29sZSAqLw0KDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBwYWdlRWRpdG9yKCk7DQoNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIGluaXRUYWJzU2Nyb2xsYWJsZSgkdGFicykgew0KICAgICAgICAgICAgJHRhYnMuZWFjaChmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICB2YXIgJHRhYnNOYXYgPSAkKHRoaXMpLmZpbmQoIi50YWJzLWhlYWRpbmciKSwNCiAgICAgICAgICAgICAgICAgICAgJHRhYnNDb250YWluZXIgPSAkKHRoaXMpLmZpbmQoIi50YWJzLWNvbnRhaW5lciIpOw0KDQogICAgICAgICAgICAgICAgJHRhYnNOYXYuZmluZCgibGk6Zmlyc3QtY2hpbGQiKS5hZGRDbGFzcygiYWN0aXZlIik7DQogICAgICAgICAgICAgICAgJHRhYnNDb250YWluZXIuZmluZCgiLnRhYjplcSgwKSIpLmFkZENsYXNzKCJhY3RpdmUiKTsNCg0KICAgICAgICAgICAgICAgIGJpbmRDaGFuZ2VUYWJzKCR0YWJzTmF2LCAkdGFic0NvbnRhaW5lcik7DQogICAgICAgICAgICAgICAgaW5pdE5hdlNjcm9sbCgkdGFic05hdik7DQogICAgICAgICAgICAgICAgYmluZFByZXZOZXh0RXZlbnRzKCQodGhpcyksICR0YWJzTmF2KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQoNCiAgICAgICAgaW5pdFRhYnNTY3JvbGxhYmxlKCR0YWJzU2Nyb2xsKTsNCiAgICAgICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIGluaXRUYWJzU2Nyb2xsYWJsZSgkdGFic1Njcm9sbCk7DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGRpc2FibGVFbXB0eVRhYnMoJHRhYnMpIHsNCiAgICAgICAgdmFyIGVtcHR5UGxhY2Vob2xkZXJzID0gJHRhYnMuZmluZCgiLnNjRW1wdHlQbGFjZWhvbGRlciIpLA0KICAgICAgICAgICAgaSwgbGVuZ3RoLCBoLA0KICAgICAgICAgICAgcGFyZW50LA0KICAgICAgICAgICAgJHBsYWNlaG9sZGVyLA0KICAgICAgICAgICAgcGxhY2Vob2xkZXJJZCwNCiAgICAgICAgICAgIHBsYWNlaG9sZGVyS2V5LA0KICAgICAgICAgICAgZWRpdEZyYW1lLA0KICAgICAgICAgICAgY2hyb21lS2V5Ow0KDQogICAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IGVtcHR5UGxhY2Vob2xkZXJzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAkcGxhY2Vob2xkZXIgPSAkKGVtcHR5UGxhY2Vob2xkZXJzW2ldKTsNCiAgICAgICAgICAgIHBsYWNlaG9sZGVySWQgPSAkcGxhY2Vob2xkZXIuYXR0cigic2MtcGxhY2Vob2xkZXItaWQiKTsNCg0KICAgICAgICAgICAgLy9kaXNhYmxlIGVkaXQgZnJhbWVzDQogICAgICAgICAgICB2YXIgcGxhY2Vob2xkZXJDb2RlVGFnID0gJHBsYWNlaG9sZGVyLnNpYmxpbmdzKCJjb2RlW2Nocm9tZXR5cGU9J3BsYWNlaG9sZGVyJ11baWQ9JyIgKyBwbGFjZWhvbGRlcklkICsgIiddIik7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyS2V5ID0gcGxhY2Vob2xkZXJDb2RlVGFnLmF0dHIoImtleSIpOw0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YocGxhY2Vob2xkZXJLZXkpID09PSAic3RyaW5nIikgew0KICAgICAgICAgICAgICAgICAgICBlZGl0RnJhbWUgPSBTaXRlY29yZS5QYWdlTW9kZXMuQ2hyb21lTWFuYWdlci5jaHJvbWVzKCkuZmlsdGVyKGZ1bmN0aW9uKGNocm9tZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY2hyb21lS2V5ID0gY2hyb21lLm9wZW5pbmdNYXJrZXIoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2hyb21lS2V5KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBjaHJvbWVLZXkgPSBjaHJvbWVLZXkuYXR0cigia2V5Iik7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mKGNocm9tZUtleSkgIT09ICJ1bmRlZmluZWQiICYmIGNocm9tZUtleS5pbmRleE9mKHBsYWNlaG9sZGVyS2V5KSA9PT0gMDsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgZWRpdEZyYW1lWzBdLnR5cGUuY2hyb21lLmRhdGEuY3VzdG9tLmVkaXRhYmxlID0gImZhbHNlIjsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyA2NjY7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyAvL2ZhbGxiYWNrIC0gZGVsZXRlIGNvZGUgdGFncyB0byBwcmV2ZW50IGluc2VydGluZyBpbnRvIHBsYWNlaG9sZGVycw0KICAgICAgICAgICAgICAgICRwbGFjZWhvbGRlci5zaWJsaW5ncygiY29kZVtjaHJvbWV0eXBlPSdwbGFjZWhvbGRlciddIikucmVtb3ZlKCk7DQogICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqLw0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJDb3VsZCBub3QgZGlzYWJsZSBlZGl0aW5nIGZvciBwbGFjZWhvbGRlciIsIGUpOw0KICAgICAgICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uc29sZSAqLw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvL2FkanVzdCBoZWlnaHQsIGFuZCByZW1vdmUgcGxhY2Vob2xkZXIgImRhc2hlZCIgYmFja2dyb3VuZA0KICAgICAgICAgICAgcGFyZW50ID0gJHBsYWNlaG9sZGVyLnBhcmVudHMoIi50YWJzLWhlYWRpbmciKTsNCiAgICAgICAgICAgIGlmIChwYXJlbnQubGVuZ3RoICE9PSAwKSB7DQogICAgICAgICAgICAgICAgaCA9IHBhcnNlSW50KHBhcmVudC5jc3MoImZvbnQtc2l6ZSIpKSAqIDIgfHwgKCRwbGFjZWhvbGRlci5oZWlnaHQoKSAvIDMpOw0KICAgICAgICAgICAgICAgICRwbGFjZWhvbGRlci5hcHBlbmQoJCgiPHA+W05vIGNvbXBvbmVudHMgaW4gaGVhZGVyXTwvcD4iKSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGggPSAkcGxhY2Vob2xkZXIuaGVpZ2h0KCk7DQogICAgICAgICAgICAgICAgJHBsYWNlaG9sZGVyLmFwcGVuZCgkKCI8cD5bTm8gY29tcG9uZW50cyBpbiB0YWJdPC9wPiIpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGggKz0gInB4IjsNCiAgICAgICAgICAgICRwbGFjZWhvbGRlci5yZW1vdmVDbGFzcygic2NFbXB0eVBsYWNlaG9sZGVyIik7DQogICAgICAgICAgICAkcGxhY2Vob2xkZXIuY3NzKCJoZWlnaHQiLCBoKTsNCg0KICAgICAgICAgICAgLy9zZXQgZWRpdCBoZXJlIHRleHQNCg0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0UXVlcnlQYXJhbSh2YXJpYWJsZSkgew0KICAgICAgICB2YXIgcXVlcnkgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKTsNCiAgICAgICAgdmFyIHZhcnMgPSBxdWVyeS5zcGxpdCgiJiIpOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhcnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIHZhciBwYWlyID0gdmFyc1tpXS5zcGxpdCgiPSIpOw0KICAgICAgICAgICAgaWYgKGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzBdKSA9PT0gdmFyaWFibGUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBudWxsOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHVwZGF0ZVF1ZXJ5UGFyYW0oa2V5LCB2YWx1ZSkgew0KICAgICAgICB2YXIgdXJsOw0KICAgICAgICANCiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2Yoa2V5ICsgIj0iKSA+IC0xKSB7DQogICAgICAgICAgICB1cmwgPSBsb2NhdGlvbi5ocmVmLnJlcGxhY2Uoa2V5ICsgIj0iICsgZ2V0UXVlcnlQYXJhbShrZXkpLCBrZXkgKyAiPSIgKyB2YWx1ZSk7DQogICAgICAgIH0gZWxzZSBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigiPyIpID4gLTEpIHsNCiAgICAgICAgICAgIHVybCA9IGxvY2F0aW9uLmhyZWYgKyAiJiIgKyBrZXkgKyAiPSIgKyB2YWx1ZTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHVybCA9IGxvY2F0aW9uLmhyZWYgKyAiPyIgKyBrZXkgKyAiPSIgKyB2YWx1ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChoaXN0b3J5LnB1c2hTdGF0ZSkgew0KICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHtwYXRoOnVybH0sICIiLCB1cmwpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gc2VsZWN0QWN0aXZlVGFiKCR0YWJOYXYsICR0YWJzKSB7DQogICAgICAgIHZhciB0YWJSb290SWQgPSAkdGFiTmF2LmNsb3Nlc3QoJy5jb21wb25lbnQudGFicycpLmF0dHIoJ2lkJyk7DQogICAgICAgIHZhciB0YWJUb1NlbGVjdCA9IGdldFF1ZXJ5UGFyYW0odGFiUm9vdElkfHwidGFiIik7DQoNCiAgICAgICAgaWYgKHRhYlRvU2VsZWN0ICE9IG51bGwgJiYgIWlzTmFOKHBhcnNlSW50KHRhYlRvU2VsZWN0KSkgJiYgaXNGaW5pdGUodGFiVG9TZWxlY3QpKSB7DQogICAgICAgICAgICB0YWJUb1NlbGVjdCA9IHBhcnNlSW50KHRhYlRvU2VsZWN0KTsNCiAgICAgICAgICAgIGlmICgkdGFiTmF2Lmxlbmd0aCA+IHRhYlRvU2VsZWN0KSB7DQogICAgICAgICAgICAgICAgJCgkdGFiTmF2W3RhYlRvU2VsZWN0XSkuYWRkQ2xhc3MoImFjdGl2ZSIpOw0KICAgICAgICAgICAgICAgICQoJHRhYnNbdGFiVG9TZWxlY3RdKS5hZGRDbGFzcygiYWN0aXZlIik7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgICR0YWJOYXYuZmlyc3QoKS5hZGRDbGFzcygiYWN0aXZlIik7DQogICAgICAgICR0YWJzLmZpcnN0KCkuYWRkQ2xhc3MoImFjdGl2ZSIpOyAgICAgDQogICAgfQ0KDQogICAgcHViLmluaXQgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgdmFyICR0YWJzID0gJCgiLnRhYnM6bm90KC5pbml0aWFsaXplZCkiKTsNCiAgICAgICAgJHRhYnMuZWFjaChmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHZhciAkdGFiTW9kdWxlID0gJCh0aGlzKS5maW5kKCIudGFicy1pbm5lciIpOw0KICAgICAgICAgICAgaW5zdGFuY2UgPSAkKHRoaXMpOw0KICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoInRhYnMtc2Nyb2xsYWJsZSIpKSB7DQogICAgICAgICAgICAgICAgdGFic1Njcm9sbGFibGUoJCh0aGlzKSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICR0YWJNb2R1bGUuZWFjaChmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyICR0YWJOYXYgPSAkKHRoaXMpLmZpbmQoIi50YWJzLWhlYWRpbmcgPiBsaSIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgJHRhYnMgPSAkKHRoaXMpLmZpbmQoIj4gLnRhYnMtY29udGFpbmVyID4gLnRhYiIpOw0KDQogICAgICAgICAgICAgICAgICAgIHNlbGVjdEFjdGl2ZVRhYigkdGFiTmF2LCAkdGFicyk7DQoNCiAgICAgICAgICAgICAgICAgICAgJHRhYk5hdi5jbGljayhmdW5jdGlvbihldmVudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gJCh0aGlzKS5pbmRleCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUXVlcnlQYXJhbSggJCh0aGlzKS5jbG9zZXN0KCcuY29tcG9uZW50LnRhYnMnKS5hdHRyKCdpZCcpfHwidGFiIiwgaW5kZXgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCJhY3RpdmUiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkucGFyZW50KCkuZmluZCgiPiAudGFicy1jb250YWluZXIgPiAudGFiIikucmVtb3ZlQ2xhc3MoImFjdGl2ZSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygiYWN0aXZlIik7DQogICAgICAgICAgICAgICAgICAgICAgICAkKCQodGhpcykucGFyZW50KCkucGFyZW50KCkuY2hpbGRyZW4oIi50YWJzLWNvbnRhaW5lciIpLmNoaWxkcmVuKCIudGFiIikuZXEoaW5kZXgpKS5hZGRDbGFzcygiYWN0aXZlIik7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNGbGlwSW5zaWRlKGluc3RhbmNlKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFhBLmNvbXBvbmVudC5mbGlwLmVxdWFsU2lkZUhlaWdodChpbnN0YW5jZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignRXJyb3IgZHVyaW5nIGNhbGN1bGF0aW9uIGhlaWdodCBvZiBGbGlwIGxpc3QgaW4gdG9nZ2xlJyk7IC8vIGpzaGludCBpZ25vcmU6bGluZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbnNvbGUgKi8NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VFZGl0b3IoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBkaXNhYmxlRW1wdHlUYWJzKCR0YWJNb2R1bGUpOw0KICAgICAgICAgICAgaWYgKGlzRmxpcEluc2lkZShpbnN0YW5jZSkpIHsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgICBYQS5jb21wb25lbnQuZmxpcC5lcXVhbFNpZGVIZWlnaHQoaW5zdGFuY2UpOw0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqLw0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIGR1cmluZyBjYWxjdWxhdGlvbiBoZWlnaHQgb2YgRmxpcCBsaXN0IGluIHRvZ2dsZScpOyAvLyBqc2hpbnQgaWdub3JlOmxpbmUNCiAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovDQoNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCJpbml0aWFsaXplZCIpOw0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICByZXR1cm4gcHViOw0KfShqUXVlcnkpKTsNCg0KWEEucmVnaXN0ZXIoInRhYnMiLCBYQS5jb21wb25lbnQudGFicyk7
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 11838
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20160811T135343Z
  - Version: 2
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20160811T135343Z
