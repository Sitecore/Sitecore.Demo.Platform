---
ID: "100a1fd8-7de4-4211-9eec-217729359f05"
Parent: "594d7d33-1176-417b-864a-e8810e5d2946"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: "/sitecore/media library/Themes/Habitat Sites/Habitat Home/scripts/component-video-playlist"
DB: master
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/4FA334D275504202AD1CEA215FF9E5CB.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "52bd70e7-7f92-40b6-950b-fd0d5bf4fad9"
  Value: LyogZ2xvYmFsIG1lanM6ZmFsc2UgKi8NClhBLmNvbXBvbmVudC5wbGF5bGlzdCA9IChmdW5jdGlvbigkKSB7DQoNCiAgICB2YXIgYXBpID0ge307DQoNCiAgICBmdW5jdGlvbiBQbGF5bGlzdChwbGF5bGlzdCwgcHJvcGVydGllcykgew0KICAgICAgICB0aGlzLnByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzOw0KICAgICAgICB0aGlzLnBsYXlsaXN0ID0gcGxheWxpc3Q7DQogICAgICAgIHRoaXMuYWN0aXZlVmlkZW8gPSAwOw0KICAgICAgICB0aGlzLnBsYXlsaXN0SXRlbXMgPSAwOw0KICAgIH0NCg0KICAgIFBsYXlsaXN0LnByb3RvdHlwZS5jcmVhdGVOZXdTb3VyY2VzID0gZnVuY3Rpb24oc291cmNlLCB2aWRlb0NvbnRhaW5lcikgew0KICAgICAgICB2YXIgbmV3U291cmNlOw0KDQogICAgICAgIHZhciBzb3VyY2VCdWlsZGVyID0gZnVuY3Rpb24ocGF0aCkgew0KICAgICAgICAgICAgdmFyIG5ld1NvdXJjZSA9ICQoIjxzb3VyY2U+IiksDQogICAgICAgICAgICAgICAgdHlwZTsNCg0KICAgICAgICAgICAgaWYgKHBhdGgubWF0Y2goL1wuKG1wNCkkLykpIHsNCiAgICAgICAgICAgICAgICB0eXBlID0gInZpZGVvL21wNCI7DQogICAgICAgICAgICB9IGVsc2UgaWYgKHBhdGgubWF0Y2goL1wuKHdlYm0pJC8pKSB7DQogICAgICAgICAgICAgICAgdHlwZSA9ICJ2aWRlby93ZWJtIjsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAocGF0aC5tYXRjaCgvXC4ob2d2KSQvKSkgew0KICAgICAgICAgICAgICAgIHR5cGUgPSAidmlkZW8vb2dnIjsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdHlwZSA9ICJ2aWRlby95b3V0dWJlIjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgbmV3U291cmNlLmF0dHIoew0KICAgICAgICAgICAgICAgICJ0eXBlIjogdHlwZSwNCiAgICAgICAgICAgICAgICAic3JjIjogcGF0aA0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIHJldHVybiBuZXdTb3VyY2U7DQogICAgICAgIH07DQoNCiAgICAgICAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIEFycmF5KSB7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNvdXJjZS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIG5ld1NvdXJjZSA9IHNvdXJjZUJ1aWxkZXIoc291cmNlW2ldKTsNCiAgICAgICAgICAgICAgICB2aWRlb0NvbnRhaW5lci5maW5kKCJ2aWRlbyIpLmFwcGVuZChuZXdTb3VyY2UpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgbmV3U291cmNlID0gc291cmNlQnVpbGRlcihzb3VyY2UpOw0KICAgICAgICAgICAgdmlkZW9Db250YWluZXIuZmluZCgidmlkZW8iKS5hcHBlbmQobmV3U291cmNlKTsNCiAgICAgICAgfQ0KICAgIH07DQoNCiAgICBQbGF5bGlzdC5wcm90b3R5cGUucmVwbGFjZVNvdXJjZSA9IGZ1bmN0aW9uKGl0ZW1JbmRleCwgbG9hZEZyb21FdmVudCkgew0KICAgICAgICB2YXIgaW5zdCA9IHRoaXMsDQogICAgICAgICAgICB2aWRlb0NvbnRhaW5lciwNCiAgICAgICAgICAgIHZpZGVvQ2xvbmUsDQogICAgICAgICAgICBuZXdTcmMgPSBpbnN0LnByb3BlcnRpZXMuc291cmNlc1tpdGVtSW5kZXhdLnNyYywNCiAgICAgICAgICAgIHNvdXJjZXMsDQogICAgICAgICAgICB2aWRlb0lkLA0KICAgICAgICAgICAgdmlkZW9Db250YWluZXJIZWlnaHQgPSAwOw0KDQogICAgICAgICQoaW5zdC5wcm9wZXJ0aWVzLnBsYXlsaXN0SWQpLmVhY2goZnVuY3Rpb24oKSB7DQogICAgICAgICAgICB2aWRlb0NvbnRhaW5lciA9ICQodGhpcyk7DQogICAgICAgICAgICB2aWRlb0lkID0gaW5zdC5wcm9wZXJ0aWVzLnBsYXlsaXN0SWQ7DQoNCiAgICAgICAgICAgIGlmICgodmlkZW9Db250YWluZXIuaXModmlkZW9JZCkgJiYgKG5ld1NyYy5sZW5ndGgpKSkgew0KICAgICAgICAgICAgICAgIHZpZGVvQ29udGFpbmVyLmFkZENsYXNzKCJzaG93Iik7DQoNCiAgICAgICAgICAgICAgICAvKm1lanMucGxheWVyc1tpZF0ucGF1c2UoKTsNCiAgICAgICAgICAgICAgICBtZWpzLnBsYXllcnNbaWRdLnNldFNyYyhuZXdTcmMpOyAgICAgICAgDQogICAgICAgICAgICAgICAgbWVqcy5wbGF5ZXJzW2lkXS5tZWRpYS5sb2FkKCk7DQogICAgICAgICAgICAgICAgbWVqcy5wbGF5ZXJzW2lkXS5wbGF5KCk7Ki8NCiAgICAgICAgICAgICAgICAvKmFib3ZlIGRvZXNlbnQgd29yayB3aGVuIGNobmFnaW5nIGJlZXR3ZWVuIGhvc3RlZCBhbmQgeW91dHViZSB2aWRlb3MqLw0KDQogICAgICAgICAgICAgICAgc291cmNlcyA9IHZpZGVvQ29udGFpbmVyLmZpbmQoInNvdXJjZSIpOw0KICAgICAgICAgICAgICAgIHNvdXJjZXMucmVtb3ZlKCk7DQogICAgICAgICAgICAgICAgaW5zdC5jcmVhdGVOZXdTb3VyY2VzKG5ld1NyYywgdmlkZW9Db250YWluZXIpOw0KICAgICAgICAgICAgICAgIHZpZGVvQ29udGFpbmVyLmZpbmQoInZpZGVvIikuYXR0cih7DQogICAgICAgICAgICAgICAgICAgIHNyYzogIiINCiAgICAgICAgICAgICAgICB9KS5zaG93KCk7DQoNCiAgICAgICAgICAgICAgICB2YXIgYXV0b3BsYXlWaWRlbyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIGlmIChsb2FkRnJvbUV2ZW50KSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChpbnN0LnByb3BlcnRpZXMuYXV0b1BsYXlTZWxlY3RlZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXlWaWRlbyA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdC5wcm9wZXJ0aWVzLmF1dG9QbGF5KSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhdXRvcGxheVZpZGVvID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChhdXRvcGxheVZpZGVvKSB7DQogICAgICAgICAgICAgICAgICAgIHZpZGVvQ29udGFpbmVyLmZpbmQoInZpZGVvIikuYXR0cih7DQogICAgICAgICAgICAgICAgICAgICAgICBhdXRvcGxheTogIiINCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgdmlkZW9DbG9uZSA9IHZpZGVvQ29udGFpbmVyLmZpbmQoInZpZGVvIikuY2xvbmUoKTsNCiAgICAgICAgICAgICAgICB2aWRlb0NvbnRhaW5lckhlaWdodCA9IHZpZGVvQ29udGFpbmVyLmhlaWdodCgpOw0KICAgICAgICAgICAgICAgIHZpZGVvQ29udGFpbmVyLmNzcyh7DQogICAgICAgICAgICAgICAgICAgICJoZWlnaHQiOiB2aWRlb0NvbnRhaW5lckhlaWdodA0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgdmFyIGlkID0gdmlkZW9Db250YWluZXIuZmluZCgiLm1lanMtY29udGFpbmVyIikuYXR0cigiaWQiKTsNCiAgICAgICAgICAgICAgICBpZiAoaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgJCgiIyIgKyBpZCkucmVtb3ZlKCk7DQogICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBtZWpzLnBsYXllcnNbaWRdOw0KICAgICAgICAgICAgICAgICAgICB2aWRlb0NvbnRhaW5lci5maW5kKCIuY29tcG9uZW50LWNvbnRlbnQiKS5hcHBlbmQodmlkZW9DbG9uZSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgWEEuY29tcG9uZW50LnZpZGVvLmluaXRWaWRlb0Zyb21QbGF5bGlzdCh2aWRlb0NvbnRhaW5lciwgaW5zdC5wbGF5bGlzdCk7DQogICAgICAgICAgICAgICAgdmlkZW9Db250YWluZXIuY3NzKHsNCiAgICAgICAgICAgICAgICAgICAgImhlaWdodCI6ICJhdXRvIg0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9Ow0KDQogICAgUGxheWxpc3QucHJvdG90eXBlLmxvYWRQbGF5bGlzdFZpZGVvID0gZnVuY3Rpb24oKSB7DQogICAgICAgIHZhciBpbnN0ID0gdGhpcywNCiAgICAgICAgICAgIHBsYXlsaXN0SXRlbXMgPSAkKGluc3QucGxheWxpc3QpLmZpbmQoIi5wbGF5bGlzdC1pdGVtIiksDQogICAgICAgICAgICBhY3RpdmVMaXN0SXRlbTsNCg0KICAgICAgICBpbnN0LnBsYXlsaXN0SXRlbXMgPSBwbGF5bGlzdEl0ZW1zLmxlbmd0aDsNCiAgICAgICAgdmFyIGxvYWRWaWRlb0Zyb21QbGF5bGlzdCA9IGZ1bmN0aW9uKGxvYWRGcm9tRXZlbnQpIHsNCiAgICAgICAgICAgIGluc3QucmVwbGFjZVNvdXJjZShpbnN0LmFjdGl2ZVZpZGVvLCBsb2FkRnJvbUV2ZW50KTsNCiAgICAgICAgICAgIGFjdGl2ZUxpc3RJdGVtID0gcGxheWxpc3RJdGVtcy5lcShpbnN0LmFjdGl2ZVZpZGVvKTsNCiAgICAgICAgICAgIGFjdGl2ZUxpc3RJdGVtLmFkZENsYXNzKCJhY3RpdmUiKTsNCiAgICAgICAgICAgIGFjdGl2ZUxpc3RJdGVtLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoImFjdGl2ZSIpOw0KICAgICAgICB9DQoNCiAgICAgICAgbG9hZFZpZGVvRnJvbVBsYXlsaXN0KCk7DQogICAgICAgICQoaW5zdC5wbGF5bGlzdCkub24oImNoYW5nZS12aWRlbyIsIGZ1bmN0aW9uKGV2ZW50LCBwcm9wZXJ0aWVzKSB7DQogICAgICAgICAgICB2YXIgbG9hZE5ld1ZpZGVvID0gZmFsc2U7DQoNCiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzKSB7DQogICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoImJhY2siKSkgew0KICAgICAgICAgICAgICAgICAgICBpbnN0LmFjdGl2ZVZpZGVvLS07DQogICAgICAgICAgICAgICAgICAgIGlmIChpbnN0LmFjdGl2ZVZpZGVvIDwgMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaW5zdC5hY3RpdmVWaWRlbyA9IDA7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsb2FkTmV3VmlkZW8gPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgaW5zdC5hY3RpdmVWaWRlbysrOw0KICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdC5hY3RpdmVWaWRlbyA9PT0gaW5zdC5wbGF5bGlzdEl0ZW1zKSB7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnN0LnByb3BlcnRpZXMucmVwZWF0QWZ0ZXJBbGwpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0LmFjdGl2ZVZpZGVvID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkTmV3VmlkZW8gPSB0cnVlDQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3QuYWN0aXZlVmlkZW8gPSBpbnN0LnBsYXlsaXN0SXRlbXMgLSAxOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgbG9hZE5ld1ZpZGVvID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBpZiAoaW5zdC5wcm9wZXJ0aWVzLnBsYXlOZXh0KSB7DQogICAgICAgICAgICAgICAgICAgIGlmICgoaW5zdC5hY3RpdmVWaWRlbyArIDEpIDw9IGluc3QucGxheWxpc3RJdGVtcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgaW5zdC5hY3RpdmVWaWRlbysrOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdC5hY3RpdmVWaWRlbyA9PT0gaW5zdC5wbGF5bGlzdEl0ZW1zKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdC5hY3RpdmVWaWRlbyA9IDA7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdC5wcm9wZXJ0aWVzLnJlcGVhdEFmdGVyQWxsKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWROZXdWaWRlbyA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0LmFjdGlWaWRlby0tOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWROZXdWaWRlbyA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChsb2FkTmV3VmlkZW8pIHsNCiAgICAgICAgICAgICAgICBsb2FkVmlkZW9Gcm9tUGxheWxpc3QodHJ1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH07DQoNCiAgICBQbGF5bGlzdC5wcm90b3R5cGUuYXR0YWNoRXZlbnRzID0gZnVuY3Rpb24oKSB7DQogICAgICAgIHZhciBpbnN0ID0gdGhpcywNCiAgICAgICAgICAgIGxpbmsgPSAkKGluc3QucGxheWxpc3QpLmZpbmQoIi5wbGF5bGlzdC1zZWN0aW9uIiksDQogICAgICAgICAgICBuYXZJdGVtcyA9ICQoaW5zdC5wbGF5bGlzdCkuZmluZCgiLnBsYXlsaXN0LW5hdiBhIiksDQogICAgICAgICAgICBwbGF5bGlzdEl0ZW07DQoNCiAgICAgICAgbGluay5vbigiY2xpY2siLCBmdW5jdGlvbihldmVudCkgew0KICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCg0KICAgICAgICAgICAgcGxheWxpc3RJdGVtID0gJCh0aGlzKS5wYXJlbnRzKCIucGxheWxpc3QtaXRlbSIpOw0KICAgICAgICAgICAgdmFyIGl0ZW1JbmRleCA9IHBsYXlsaXN0SXRlbS5pbmRleCgpOw0KDQogICAgICAgICAgICBpZiAoaXRlbUluZGV4ICE9PSBpbnN0LmFjdGl2ZVZpZGVvKSB7DQogICAgICAgICAgICAgICAgcGxheWxpc3RJdGVtLmFkZENsYXNzKCJhY3RpdmUiKTsNCiAgICAgICAgICAgICAgICBwbGF5bGlzdEl0ZW0uc2libGluZ3MoKS5yZW1vdmVDbGFzcygiYWN0aXZlIik7DQogICAgICAgICAgICAgICAgaW5zdC5yZXBsYWNlU291cmNlKGl0ZW1JbmRleCwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgaW5zdC5hY3RpdmVWaWRlbyA9IGl0ZW1JbmRleDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQoNCiAgICAgICAgbmF2SXRlbXMub24oImNsaWNrIiwgZnVuY3Rpb24oZXZlbnQpIHsNCiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICB2YXIgcHJvcGVydGllcyA9IHt9Ow0KDQogICAgICAgICAgICBpZiAoJCh0aGlzKS5wYXJlbnQoKS5oYXNDbGFzcygicGxheWxpc3QtcHJldiIpKSB7DQogICAgICAgICAgICAgICAgcHJvcGVydGllcy5iYWNrID0gdHJ1ZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgJChpbnN0LnBsYXlsaXN0KS50cmlnZ2VyKCJjaGFuZ2UtdmlkZW8iLCBwcm9wZXJ0aWVzKTsNCiAgICAgICAgfSk7DQoNCiAgICB9Ow0KDQoNCiAgICBhcGkuaW5pdCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICB2YXIgcGxheWxpc3RzID0gJCgiLnBsYXlsaXN0LmNvbXBvbmVudDpub3QoLmluaXRpYWxpemVkKSIpLA0KICAgICAgICAgICAgcHJvcGVydGllcywNCiAgICAgICAgICAgIHBsYXlsaXN0Ow0KDQogICAgICAgIHBsYXlsaXN0cy5lYWNoKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgcHJvcGVydGllcyA9ICQodGhpcykuZGF0YSgicHJvcGVydGllcyIpOw0KDQogICAgICAgICAgICAkKHByb3BlcnRpZXMucGxheWxpc3RJZCkuYWRkQ2xhc3MoImluaXRpYWxpemVkIik7IC8vcHJldmVudCB2aWRlbyBpbml0IGluIGNvbXBvbmVudC12aWRlby5qcw0KICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMuc291cmNlcy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICBwbGF5bGlzdCA9IG5ldyBQbGF5bGlzdCh0aGlzLCBwcm9wZXJ0aWVzKTsNCiAgICAgICAgICAgICAgICBwbGF5bGlzdC5sb2FkUGxheWxpc3RWaWRlbygpOw0KICAgICAgICAgICAgICAgIHBsYXlsaXN0LmF0dGFjaEV2ZW50cygpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCJpbml0aWFsaXplZCIpOw0KICAgICAgICB9KTsNCiAgICB9Ow0KDQogICAgcmV0dXJuIGFwaTsNCn0oalF1ZXJ5LCBkb2N1bWVudCkpOw0KDQpYQS5yZWdpc3RlcigicGxheWxpc3QiLCBYQS5jb21wb25lbnQucGxheWxpc3QpOw==
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 7996
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20160811T135343Z
  - Version: 2
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20160811T135343Z
